#!/bin/bash
#
# Create a namelist
#

if [ $imem -eq 0 ]; then
    name="ctrl"
else
    name=$(printf "%s%03d" $SUBDIR_NAME $imem)
fi
    
cat <<EOF > $SCRI/namelist.$name
&NAMARG ! write comments like this
NCONF=1,
LSLAG=.true.,
CNMEXP='$EXPS',
UTSTEP=$TSTEP,
CUSTOP='h$NSTOP',      ! txx = timesteps, hxx = hours, dxx = days.
/
&NAMDIM
NPROMA=-24, !-8,
/
&NAMGFL
YQ_NL%LGP=true,
YQ_NL%LSP=false,
YO3_NL%LGP=false,
YQ_NL%LGPINGP=true,
YR_NL%NREQIN=-1,
YS_NL%NREQIN=-1,
/
&NAMPAR0
  LSTATS=.TRUE.,
  LDETAILED_STATS=.FALSE.,
  LSYNCSTATS=.false.,
  MP_TYPE=2,
  MBX_SIZE=128000000,
  NPROC=$NPROC,
  NOUTPUT=1,
 /    
 &NAMCT0
  NFPOS=2,
  LREFOUT=false, !true,
  N3DINI=0,
  NFRDHP=1,
  NFRDHFD=1,
  NFRHIS=$NFRHIS,
  NFRPOS=$NFRPOS,
  NPOSTS=$NPOSTS,
  NHISTS=$NHISTS,
  CTYPE="$CTYPE",
  NFRSDI=1, 
  LSLPHY=.false.,
  LSLPHY=.true.,
  NUNDEFLD=1,
 /    


!&NAMCT0 ! this alternative also works
! NFPOS=2,
! LREFOUT=false,
! N3DINI=0,
! NFRDHP=1,
! NFRDHFD=1,
! NFRHIS=24,
! NFRPOS=24,
! NPOSTS=0,
! NHISTS=0,
! CTYPE="cf",
! NFRSDI=1, 
! LSLPHY=.false.,
! LSLPHY=.true.,
!/  


&NAMPAR1
  LSPLIT=true,
  NFLDIN=0,
  NSTRIN=1,
  NSTROUT=0,
  NOUTTYPE=1,
  LPPTSF=false,
  NPPBUFLEN=100000,
/   
&NAMRIP0
  NINDAT=19970115,
  NSSSSS=43200,
/   
&NAEPHY
 LEPHYS=true,
 LERADI=true,
 LELAIV=false,
 LWCOU=true,           ! turns on wave model
 LWCOU2W=true,     ! enables 2-way coupling between atmosphere & wave model
/   
&NAERAD
 NRPROMA=-24,
 CRTABLEDIR="rtables/",    ! modify this for your installation, note trailing /
/   
&NAMGEM
  NHTYP=0,
/   
&NAMDPHY
! NVXTR2=0,
! NVEXTR=0,
! NCEXTR=0,
/    
&NAMDDH
 BDEDDH(1:6,1)=4.0,1.0,0.0,50.0,0.0,49.0,
 NDHKD=120,
 LHDZON=false,
 LHDEFZ=false,
 LHDDOP=false,
 LHDEFD=false,
 LHDGLB=true,
 LHDPRG=true,
 LHDHKS=true,
/  
&NAMAFN
  TFP_FUA(1)%LLGP=.false.,
/   
&NAMRES
  NFRRES=9999,
/   
&NAMFPC
    CFPFMT='MODEL',
    $NFP3DFS
    $MFP3DFS
    $NRFP3S
    $NFP2DF
    $MFP2DF
    $NFP3DFP
    $MFP3DFP
    $RFP3P
    $NFPPHY
    $MFPPHY
/
$NAMGRIB
$NAMSPSDT
$NAMSTOPH
$NAMCUMF
$NAMSPP

&NAEAER
/
&NAEPHY
/
&NAERAD
/
&NALBAR
/
&NALORI
/
&NAM_DISTRIBUTED_VECTORS
/
&NAM926
/
&NAMAFN
/
&NAMANA
/
&NAMARPHY
/
&NAMCA
/
&NAMCAPE
/
&NAMCFU
/
&NAMCHK
/
&NAMCHET
/
&NAMCLDP
/
&NAMCLTC
/
&NAMCOM
/
&NAMCOS
/
&NAMCTAN
/
&NAMCUMF
/
&NAMCUMFS
/
&NAMCT1
/
&NAMCVA
/
&NAMDDH
/
&NAMDFHD
/
&NAMDFI
/
&NAMDIF
/
&NAMDIM
/
&NAMDIMO
/
&NAMDMSP
/
&NAMDPHY
/
&NAMDYN
/
&NAMDYNA
/
&NAMDYNCORE
/
&NAMEMIS_CONF
/
&NAMENKF
/
&NAMFA
/
&NAMFFT
/
&NAMFPC
/
&NAMFPD
/
&NAMFPDY2
/
&NAMFPDYH
/
&NAMFPDYP
/
&NAMFPDYS
/
&NAMFPDYT
/
&NAMFPDYV
/
&NAMFPEZO
/
&NAMFPF
/
&NAMFPG
/
&NAMFPIOS
/
&NAMFPPHY
/
&NAMFPSC2
/
&NAMFPSC2_DEP
/
&NAMFY2
/
&NAMGEM
/
&NAMGFL
/
&NAMGMS
/
&NAMGOES
/
&NAMGOM
/
&NAMGRIB
/
&NAMGWD
/
&NAMGWWMS
/
&NAMHLOPT
/
&NAMINI
/
&NAMIOMI
/
&NAMIOS
/
&NAMJBCODES
/
&NAMJFH
/
&NAMJG
/
&NAMJO
/
&NAMKAP
/
&NAMLCZ
/
&NAMLEG
/
&NAMLFI
/
&NAMMCC
/
&NAMMCUF
/
&NAMMETEOSAT
/
&NAMMTS
/
&NAMMTSAT
/
&NAMMTT
/
&NAMMUL
/
&NAMNMI
/
&NAMNASA
/
&NAMNN
/
&NAMNPROF
/
&NAMNUD
/
&NAMOBS
/
&NAMONEDVAR
/
&NAMOPH
/
&NAMOPTCMEM
/
&NAMPAR0
/
&NAMPARAR
/
&NAMPAR1
/
&NAMPHY
/
&NAMPHY0
/
&NAMPHY1
/
&NAMPHY2
/
&NAMPHY3
/
&NAMPHYDS
/
&NAMPPC
/
&NAMPONG
/
&NAMRAD15
/
&NAMRADCMEM
/
&NAMRCOEF
/
&NAMRES
/
&NAMRINC
/
&NAMRIP
/
&NAMSATS
/
&NAMSCC
/
&NAMSCEN
/
&NAMSCM
/
&NAMSENS
/
&NAMSIMPHL
/
&NAMSKF
/
&NAMSPSDT
/
&NAMSPP ! NOTE: parameter estimation not available in standard OpenIFS
!LPAREST=TRUE,
!LPARPERT_CFM=1.0,
!LPARPERT_TOFDC=1.0,
!LPARPERT_HSDT=1.0,
!LPARPERT_VDEXC_LEN_STABLE_BL=1.0,
!LPARPERT_ENTRORG=1.0,
!LPARPERT_ENTSHALP=1.0,
!LPARPERT_DETRPEN=1.0,
!LPARPERT_RPRCON=1.0,
!LPARPERT_RTAU=1.0,
!LPARPERT_CUDUDV=1.0,
!LPARPERT_RAMID=1.0,
!LPARPERT_RCLDIFF=1.0,
!LPARPERT_RCLCRIT=1.0,
!LPARPERT_RLCRITSNOW=1.0,
!LPARPERT_ZDECORR=1.0,
!LPARPERT_ZSIGQCW=1.0,
!LPARPERT_ZRADEFF=1.0,
!LPARPERT_ZHS_VDAERO=1.0,
!LPARPERT_DELTA_AERO=1.0,
/
&NAMSSMI
/
&NAMSTA
/
&NAMSTOPH
/
&NAMTCWV
/
&NAMTESTVAR
/
&NAMTOPH
/
&NAMTOVS
/
&NAMTRAJP
/
&NAMTRANS
/
&NAMTRM
/
&NAMVAR
/
&NAMVARBC
/
&NAMVARBC_AIREP
/
&NAMVARBC_ALLSKY
/
&NAMVARBC_GBRAD
/
&NAMVARBC_RAD
/
&NAMVARBC_SFCOBS
/
&NAMVARBC_TCWV
/
&NAMVARBC_TO3
/
&NAMVAREPS
/
&NAMVDOZ
/
&NAMVFP
/
&NAMVRTL
/
&NAMVV0
/
&NAMVV1
/
&NAMVV2
/
&NAMVWRK
/
&NAMWAVELETJB
/
&NAMXFU
/
&NAMZDI
/
&NAPHLC
/
&NAV1IS
/
&NAEPHLI
/
&NAMCVER
/
&NAMPPVI
/
&NAMSPNG
/
&NAMRLX
/
&NAMTHLIM
/
&NAMOOPS
/
&NAMINTFLEX
/
&NAMIAU
/
&NAMDIM_TRAJ
/
&NAMVDF
/
&NAMGWDIAG
/
&NAMTRANS0
/
&NAMMETHOX
/
&NAM_ATLAS_IFS
/
&NAETLDIAG
/
EOF
